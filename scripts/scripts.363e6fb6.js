"use strict";angular.module("contactManagerApp",["ngAnimate","ui.router","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(a,b){angular.isUndefinedOrNull=function(a){return angular.isUndefined(a)||null===a},a.state("home",{url:"/",templateUrl:"views/home.html",controller:"HomeController"}),b.otherwise("/")}]),angular.module("contactManagerApp").controller("HomeController",["getContact","$scope","CONSTANTS","$rootScope","$timeout",function(a,b,c,d,e){b.contactModel={},b.assignContactModel=function(){b.contactModel={c_id:"",c_name:"",c_email:"",c_nickname:"",c_company:"",c_comments:"",c_img_url:"images/dp-grey.svg"}},b.addSearchText="",b.getContactListFromDefaultList=function(){b.contactListPrm=a.getContactList(),b.contactListPrm.then(function(a){var c=a.data;console.log("Received Contact List"),angular.forEach(c,function(a){angular.isUndefinedOrNull(a.c_image_url)&&(a.c_img_url=b.generateImageUrl())}),localStorage.setItem("contactList",JSON.stringify(c)),b.contactList=c},function(a){console.log("Did not receive Contact List "+JSON.stringify(a.statusText))})},b.generateImageUrl=function(){return"images/dp-"+Math.floor(3*Math.random()+1)+".svg"},b.$watch("contactList",function(a,c){return a===c?!1:void localStorage.setItem("contactList",JSON.stringify(b.contactList))},!0),b.deleteContact=function(a){angular.forEach(b.contactList,function(c,d){a===c.c_id&&(b.contactList.splice(d,1),0===b.contactList.length?b.broadcastMessage("No contacts to show. Please add a new contact.","",1e6):b.broadcastMessage(c.c_name+" deleted",""))})},b.addContact=function(a){var c=!1;angular.forEach(b.contactList,function(d){a.c_id===d.c_id&&(c=!0,angular.forEach(a,function(a,b){d[b]=a}),b.broadcastMessage("Contact "+a.c_name+" updated."))}),c||(angular.forEach(a,function(a,c){b.contactModel[c]=a}),b.contactList.push(a),b.broadcastMessage("Contact "+a.c_name+" added."))},b.setupEmptyModal=function(){b.addSearchText="",b.assignContactModel()},b.setupEditModal=function(a){b.setupEmptyModal(),b.contactModel.c_id="",b.contactModel.c_id=Math.floor(99999*Math.random()+1),b.contactModel.c_name=a},b.editContact=function(a){angular.forEach(b.contactList,function(c){a===c.c_id&&angular.forEach(c,function(a,c){b.contactModel[c]=a})})},b.broadcastMessage=function(a,c,d){b.message=a,b.messageType=c;var f=d;isNaN(parseInt(f,10))&&(f=8e3),e(function(){b.message="",b.messageType=""},parseInt(f,10))},angular.isUndefinedOrNull(localStorage.getItem("contactList"))?b.getContactListFromDefaultList():(b.contactList=JSON.parse(localStorage.getItem("contactList")),0===b.contactList.length&&b.broadcastMessage("No contacts to show. Please add a new contact.","",1e6))}]),angular.module("contactManagerApp").service("getContact",["$q","$http","CONSTANTS",function(a,b,c){this.getContactList=function(){var d=a.defer();return b.get(c.DEFAULT_CONTACT_LIST).then(function(a){d.resolve(a)},function(a){d.reject(a)}),d.promise}}]),angular.module("contactManagerApp").service("uploadImage",function(){}),angular.module("contactManagerApp").constant("CONSTANTS",{DEFAULT_CONTACT_LIST:"data/defaultContactList.json",DIRECTIVE_CONTACT_CARD:"views/contactcard.html",DIRECTIVE_HEADER_SEARCH_BAR:"views/header-search-bar.html",DIRECTIVE_CREATE_MODAL:"views/create-modal.html",DIRECTIVE_EDIT_MODAL:"views/edit-modal.html"}),angular.module("contactManagerApp").directive("contactCard",["CONSTANTS",function(a){return{restrict:"E",replace:!0,scope:{datasource:"=",searchtext:"=",editcontact:"&",deletecontact:"&"},controller:["$scope",function(a){a.editcontactfn=function(b){a.editcontact()(b)},a.deletecontactfn=function(b){a.deletecontact()(b)}}],templateUrl:a.DIRECTIVE_CONTACT_CARD}}]),angular.module("contactManagerApp").directive("headerSearchBar",["CONSTANTS",function(a){return{restrict:"E",replace:!0,scope:{searchtext:"=",setupemptymodal:"&",messagetext:"="},controller:["$scope",function(a){a.setupemptymodalfn=function(){a.setupemptymodal()()}}],templateUrl:a.DIRECTIVE_HEADER_SEARCH_BAR}}]),angular.module("contactManagerApp").directive("createModal",["CONSTANTS",function(a){return{restrict:"E",replace:!0,scope:{datasource:"=",searchtext:"=",setupeditmodal:"&",editcontact:"&"},controller:["$scope",function(a){a.setupeditmodalfn=function(b){a.setupeditmodal()(b)},a.editcontactfn=function(b){a.editcontact()(b)}}],templateUrl:a.DIRECTIVE_CREATE_MODAL}}]),angular.module("contactManagerApp").directive("editModal",["CONSTANTS",function(a){return{restrict:"E",replace:!0,scope:{datasource:"=",addcontact:"&"},controller:["$scope",function(a){a.addcontactfn=function(b){a.addcontact()(b)}}],templateUrl:a.DIRECTIVE_EDIT_MODAL}}]),angular.module("contactManagerApp").filter("camelCase",function(){return function(a){return a=a||"",a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}}),angular.module("contactManagerApp").controller("TestcotrollerCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("contactManagerApp").run(["$templateCache",function(a){a.put("views/contactcard.html",'<ul class="list-unstyled contact-list container-fluid"> <li class="card-container row" ng-repeat="contact in datasource|filter:{c_name:searchtext} track by contact.c_id" tabindex="{{$index+1}}"> <div class="card-overlay"> <div class="dpic-container col-sm-1 col-xs-3" ng-click="editcontactfn(contact.c_id)" data-toggle="modal" data-target="#editContactModel"> <img ng-src="{{contact.c_img_url}}" alt="{{contact.c_name}}\'s profile photo" class="dpic" title="{{contact.c_name}}"> </div> <div class="dname-outer-container col-sm-5 col-xs-9" ng-click="editcontactfn(contact.c_id)" data-toggle="modal" data-target="#editContactModel"> <span class="dname-container"> <span class="dname" aria-label="{{contact.c_name}}" ng-bind="contact.c_name | camelCase"></span> </span> </div> <div class="email-outer-container col-sm-4 col-xs-9" ng-click="editcontactfn(contact.c_id)" data-toggle="modal" data-target="#editContactModel"> <div class="email-container"> <div role="button" class="email" ng-bind="contact.c_email | lowercase"></div> </div> </div> <div class="controls-outer-container col-sm-2 col-xs-12"> <div class="controls-container row"> <span class="fa edit-icon col-xs-6" ng-click="editcontactfn(contact.c_id)" data-toggle="modal" data-target="#editContactModel">&nbsp;</span> <span class="fa delete-icon col-xs-6" ng-click="deletecontactfn(contact.c_id)">&nbsp;</span> </div> </div> </div> </li> </ul>'),a.put("views/create-modal.html",'<div class="modal fade" id="addContactModal" role="dialog"> <div class="modal-dialog"> <article class="modal-content"> <form name="createContactForm"> <div class="modal-header"> <input ng-model="searchtext" type="text" class="form-control search-bar" placeholder="Enter a name"> </div> <div class="modal-body"> <ul class="list-unstyled contact-list container-fluid"> <li class="card-container row create-contact"> <div class="card-overlay"> <div class="dpic-container col-sm-1"> <img ng-src="images/dp-grey.svg" alt="New profile photo" class="dpic" title="New profile photo"> </div> <div class="dname-outer-container col-sm-8"> <span class="dname-container"> <span class="dname" aria-label="searchtext" ng-bind="searchtext | camelCase"> </span> </span> </div> <div class="create-icon-container col-sm-3"> <button type="submit" class="create-icon" ng-bind="\'Create\'" ng-click="setupeditmodalfn(searchtext)" data-dismiss="modal" data-toggle="modal" href="#editContactModel"></button> </div> </div> </li> <li ng-show="searchtext.length > 1" class="card-container row" ng-repeat="contact in datasource|filter:{c_name:searchtext} track by contact.c_id" tabindex="{{$index+1}}"> <div class="card-overlay"> <div class="dpic-container col-sm-1" ng-click="editcontactfn(contact.c_id)" data-toggle="modal" data-target="#editContactModel" data-dismiss="modal"> <img ng-src="{{contact.c_img_url}}" alt="{{contact.c_name}}\'s profile photo" class="dpic" title="{{contact.c_name}}"> </div> <div class="dname-outer-container col-sm-8" ng-click="editcontactfn(contact.c_id)" data-toggle="modal" data-target="#editContactModel" data-dismiss="modal"> <span class="dname-container"> <span class="dname" aria-label="{{contact.c_name}}" ng-bind="contact.c_name | camelCase"> </span> </span> </div> <div class="fa edit-icon col-sm-3" ng-click="editcontactfn(contact.c_id)" data-toggle="modal" data-target="#editContactModel" data-dismiss="modal">&nbsp;</div> </div> </li> </ul> </div> </form> </article> </div> </div>'),a.put("views/edit-modal.html",'<div class="modal fade" id="editContactModel" role="dialog"> <div class="modal-dialog"> <article class="modal-content"> <div class="modal-body row"> <form name="editContactForm" novalidate> <div class="dpic-container col-sm-3 col-xs-12"> <img ng-src="{{datasource.c_img_url}}" alt="{{datasource.c_name}}\'s profile photo" class="dpic" title="{{datasource.c_name}}"> <!-- <input type="file" name="c_profile_pic" id="field7" required="required"> --> </div> <div class="col-sm-9 col-xs-12 form-container"> <div id="field1-container" class="row form-item-container"> <div class="col-xs-12"> <input type="text" class="form-control" ng-class="{ \'has-error\' : editContactForm.c_name.$invalid && !editContactForm.name.$pristine }" name="c_name" id="field1" placeholder="Enter Full Name" required ng-model="datasource.c_name"> <i class="glyphicon glyphicon-user"></i> </div> </div> <div id="field3-container" class="row form-item-container"> <div class="col-xs-12"> <i class="glyphicon glyphicon-user user-orig"></i> <i class="glyphicon glyphicon-user user-dupe"></i> <input type="email" ng-class="{ \'has-error\' : editContactForm.c_email.$invalid && !editContactForm.c_email.$pristine }" name="c_email" id="field3" placeholder="Enter Email" required ng-model="datasource.c_email"> </div> </div> <div id="field4-container" class="row form-item-container"> <div class="col-xs-12"> <i class="glyphicon glyphicon-envelope"></i> <input type="text" ng-class="{ \'has-error\' : editContactForm.c_nickname.$invalid && !editContactForm.c_nickname.$pristine }" name="c_nickname" placeholder="Enter Nickname" id="field4" ng-model="datasource.c_nickname"> </div> </div> <div id="field5-container" class="row form-item-container"> <div class="col-xs-12"> <i class="glyphicon glyphicon-briefcase"></i> <input type="text" ng-class="{ \'has-error\' : editContactForm.c_company.$invalid && !editContactForm.c_company.$pristine }" name="c_company" placeholder="Enter Company" id="field5" ng-model="datasource.c_company"> </div> </div> <div id="field6-container" class="row form-item-container"> <div class="col-xs-12"> <i class="glyphicon glyphicon-pencil"></i> <input type="text" ng-class="{ \'has-error\' : editContactForm.c_comments.$invalid && !editContactForm.c_comments.$pristine }" name="c_comments" placeholder="Enter Comments" id="field6" ng-model="datasource.c_comments"> </div> </div> <div id="form-submit" class="row clearfix form-controls-container"> <div class="col-xs-12 col-sm-3 pull-right"> <input type="submit" value="Submit" ng-disabled="editContactForm.$invalid" ng-click="addcontactfn(datasource)" data-dismiss="modal"> </div> <div class="col-xs-12 col-sm-3 pull-right"> <input type="reset" value="Cancel" data-dismiss="modal" ng-click="editContactForm.$rollbackViewValue();"> </div> </div> </div> </form> </div> </article> </div> </div>'),a.put("views/footer.html","<p ng-bind=\"'All rights reserved Nikhil John'\"></p>"),a.put("views/header-search-bar.html",'<nav id="global-header" class="navbar navbar-default navbar-fixed-top container-fluid"> <div class="row"> <div class="navbar-header col-xs-6"> <a class="navbar-brand" href="#"></a> </div> <div id="navbar" class="col-xs-6"> <form class="navbar-form row" role="search"> <div class="input-group pull-right col-xs-12"> <input ng-model="searchtext" type="text" class="form-control search-bar" placeholder="Search for anything"> <div class="input-group-btn"> <button class="btn btn-default" type="submit"> <i class="glyphicon glyphicon-search"></i> </button> </div> </div> </form> </div> </div> <nav class="blue-bar row"> <div class="user-info col-xs-6 col-xs-offset-3" role="alert" ng-hide="messagetext.length == 0"> <span ng-bind="messagetext"></span> </div> <span class="add-contact" data-toggle="modal" ng-click="setupemptymodalfn()" data-target="#addContactModal"></span> </nav> </nav>'),a.put("views/header.html",'<nav id="global-header" class="navbar navbar-default navbar-fixed-top container-fluid"> <div class="row"> <div class="navbar-header col-xs-6"> <a class="navbar-brand" href="#"></a> </div> <div id="navbar" class="col-xs-6"> <form class="navbar-form row" role="search"> <div class="input-group pull-right col-xs-12"> <input ng-model="searchText" type="text" class="form-control search-bar" placeholder="Search for anything"> <div class="input-group-btn"> <button class="btn btn-default" type="submit"> <i class="glyphicon glyphicon-search"></i> </button> </div> </div> </form> </div> </div> <nav class="blue-bar row"> <span class="add-contact" data-toggle="modal" ng-click="setupEmptyModal()" data-target="#addContactModal"> </span> </nav> </nav>'),a.put("views/home.html",'<header-search-bar data-setupemptymodal="setupEmptyModal" data-searchtext="globalSearchText" data-messagetext="message"></header-search-bar> <div class="container"> <contact-card data-datasource="contactList" data-deletecontact="deleteContact" data-editcontact="editContact" data-searchtext="globalSearchText"></contact-card> </div> <create-modal data-datasource="contactList" data-setupeditmodal="setupEditModal" data-searchtext="addSearchText" data-editcontact="editContact"></create-modal> <edit-modal data-datasource="contactModel" data-addcontact="addContact"></edit-modal>')}]);